{% extends "base.html" %}

{% block title %}SAPS Sense - Administração{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}

{% block content %}
<div class="base-container">
    <header class="base-header">
        <h1>Usuários</h1>
        <button onclick="abrirModal()" class="btn-primary">Adicionar Usuário</button>
    </header>

    <div class="stats-cards">
        <div class="card">
            <h1>{{ stats.enfermeiros }}</h1>
            <p>Enfermeiros</p>
        </div>
        <div class="card">
            <h1>{{ stats.medicos }}</h1>
            <p>Médicos</p>
        </div>
        <div class="card">
            <h1>{{ stats.administradores }}</h1>
            <p>Administradores</p>
        </div>
    </div>
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Tipo de Usuário</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users_paginated.items %}
                <tr>
                    <td>{{ user.nome }}</td>
                    <td>{{ user.tipo.replace('_', ' ').title() }}</td>
                    <td>{{ user.email }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div id="modalRegister" class="modal" style="display:none;">
  <div class="modal-content customized-modal">
    <h3>Criar Usuário</h3>
    <p id="erroModal" class="box-danger"></p>
    <form method="post" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.nome.label }} {{ form.nome(class="form-control") }}
        </div>

        <div class="form-group">
            {{ form.tipo.label }} {{ form.tipo(class="form-control") }}
        </div>

        <div class="form-group">
            {{ form.username.label }} {{ form.username(class="form-control") }}
        </div>

        <div class="form-group">
            {{ form.email.label }} {{ form.email(class="form-control") }}
        </div>

        <div class="form-group">
            {{ form.senha.label }} {{ form.senha(class="form-control") }}
        </div>
    </form>
    <div class="modal-actions">
      <button onclick="fecharModal()" class="btn-secondary">Cancelar</button>
      <button onclick="saveUser()" class="btn-primary">Criar Usuário</button>
    </div>
  </div>
</div>

<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
{% endblock %}